@{
  ViewData["Title"] = @ViewBag.DatosEquipo.Nombre;
}

<head>
  <!-- Import bootstrap cdn -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body>
  <div class="jumbotron">
    <div class="col-sm-5"><img src=@ViewBag.DatosEquipo.Escudo></div>
    <div class="col-sm-5"><img src=@ViewBag.DatosEquipo.Escudo></div>
    <h1 class="display-4">@ViewBag.DatosEquipo.Nombre</h1>
    <p class="lead">Continente: @ViewBag.NombreContinente</p>
    <p class="lead">Copas Ganadas: @ViewBag.DatosEquipo.CopasGanadas</p>
    <hr class="my-4">
    <p class="lead">
      <a class="btn btn-primary btn-lg"
        href='@Url.Action("AgregarJugador", "Home", new {IdEquipo = @ViewBag.DatosEquipo.IdEquipo})' role="button">
        Agregar Jugador
      </a>
    </p>
  </div>
  <table class="table table-striped table-borderless table-hover">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Foto del jugador</th>
        <th scope="col">#</th>
        <th scope="col">Nombre</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      @{
        @foreach (Jugador jug in @ViewBag.ListaJugadores)
        {
          <tr>
            <td><img src=@jug.Foto style="height: 30vh; width: auto;"></td>
            <td>@jug.NumCamiseta</td>
            <td>@jug.Nombre</td>
            <td>
              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalJugador" id="buttonModal"
              value=@jug.IdJugador onclick="cargarDatosModal(this.value, @ViewBag.DatosEquipo.IdEquipo)">
                Ver Detalle
              </button>
            </td>
          </tr>
        }
      }
    </tbody>
  </table>

  <!-- Modal (Info Jugador) -->
  <div class="modal fade" id="ModalJugador" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NombreJugador">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <img class="img-fluid mx-auto" id="FotoJugador">
          <div id="NumCamiseta"></div>
          <div id="FechaNacimiento"></div>
        </div>
        <button class="btn btn-danger" data-dismiss="modal" data-toggle="modal" data-target="#ModalBorrar">Eliminar Jugador</button>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal (Borrar Jugador) -->
  <div class="modal fade" id="ModalBorrar" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Confirmar</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Esta seguro que desea elimnar al jugador seleccionado? Esta accion es irreversible!</p>
          <div class="container mx-auto">
            <button class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
            <!-- <button class="btn btn-danger" id="BtnConfirmarBorrado" value=-1>Aceptar</button> -->
            <a class="btn btn-danger" id="BtnConfirmarBorrado" value=-1 href="">Aceptar</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
    function cargarDatosModal(IdJ, IdE) {
    $.ajax({
      type: 'POST',
      dataType: "JSON",
      url: '@Url.Action("VerDetalleJugadorAjax", "Home")',
      data: { IdJugador: IdJ },
      success:
        function (response) {
          $("#NombreJugador").html(response.nombre);
          $("#FotoJugador").attr("src", response.foto);
          $("#NumCamiseta").html("Numero de camiseta: " + response.numCamiseta);
          $("#FechaNacimiento").html("Fecha de nacimiento: " + response.fechaNacimiento);
          $("#BtnConfirmarBorrado").attr("href", '@Url.Action("EliminarJugador", "Home")'+"?IdJugador="+IdJ.toString()+"&IdEquipo="+IdE.toString());
        }
    })
  }
</script>